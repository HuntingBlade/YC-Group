@#
layout("../common/base.html",{title:'亿创电力集团',nav:'index',header_css:""}){
#@
<div class="comm-warp-position">
    <div class="comm-wrapper-img">
        <div style="background: url(^{channelTopImg.sysValue!}) no-repeat center bottom;background-size: 100% auto;"></div>
    </div>
    <div class="comm-wrapper-content">
        <div class="comm-content-title">
            <div class="title">^{channelTitle.name}</div>
            <div>^{channelTitle.pageName}</div>
        </div>
        @# if(navList != null ) {#@
        <div class="comm-content-title-nav">
            <ul id="nav_list">
                @#for(nav in navList){ #@
                <li>
                    <a href="/front/public/qualification?channelId=^{nav.id}&pageNum=1" id="nav^{navLP.dataIndex}"
                       value="^{nav.id}">^{nav.name}</a>
                </li>
                @#}#@
            </ul>
        </div>
        @#}#@

        <div class="content-main">
            <div class="content-img-list">
                <ul class="banimg">
                    @#for(item in content.list){#@
                    <li>
                        <a>
                            <div class='case-img'>
                                <img src='^{item.titleImg}'>
                            </div>
                            <div class='case-info'>
                                <h1>^{item.title}</h1>
                            </div>
                        </a>
                    </li>
                    @#}#@
                </ul>
                <!-- 分页 -->
                <div id="test1" style="text-align: center"></div>
            </div>

            @# if(articleContent! != null){
            for(article in articleContent) { #@
            <div class="content-main1"
                 style="background: url(^{article.titleImg!}) no-repeat bottom center; background-size: 100% auto;">
                <div class="content-main1-child">
                    <h2>
                        <i></i>
                        ^{article.title}
                        <i></i>
                    </h2>
                    ^{article.content}
                </div>
            </div>
            @#}}#@
        </div>
    </div>
</div>
<script>
    $(function () {
        setWid();
        var search = window.location.search;
        var channelId = search.substring(search.indexOf("channelId=") + "channelId=".length, search.indexOf("&"));
        var pageNum = search.substring(search.indexOf("pageNum=") + "pageNum=".length);
        var total = "^{content.total}";
        var navLength = $("#nav_list").children("li").length;
        var activeChannelId; // 选中栏目的ID

        if (pageNum == "" || pageNum == null) {
            pageNum = 1;
        }
        $("#nav0").addClass("active");  // 默认选中第一个
        for (var i = 0; i < navLength; i++) {
            var navId = $("#nav" + i).attr("value");
            if (navId == channelId) {
                $("#nav0").removeClass("active");
                $("#nav" + i).addClass("active");
                activeChannelId = $("#nav" + i).attr("value");
                break;
            }
            var isActive = $("#nav" + i).hasClass("active");
            if (isActive) {
                activeChannelId = $("#nav" + i).attr("value");
            }
        }

        // 分页
        layui.use('laypage', function () {
            var laypage = layui.laypage;
            //执行一个laypage实例
            laypage.render({
                theme: "#0d2e3d",
                elem: 'test1', //注意，这里的 test1 是 ID，不用加 # 号
                count: total, //数据总数，从服务端得到
                curr: pageNum,
                limit: 8,
                jump: function (obj, first) {
                    if (!first) {
                        window.location.href = "/front/public/qualification?channelId=" + activeChannelId + "&pageNum=" + obj.curr;
                    }
                }
            });
        });
    });

    function setWid() {
        var wid = $(".banimg").width();
        var wid_li = wid / 4.1;
        var h_li = wid_li * 1.52;
        $(".banimg li").width(wid_li);
        $(".banimg li").height(h_li);
        var wid_img = wid_li * 0.96;
        var h_img = wid_img * 1.4;
        $(".banimg .case-img").height(h_img);
    }
</script>
@#}#@

